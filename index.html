<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Save the Date — Roberto & Chiara</title>
  <style>
    :root{
      --bg: #050607;
      --panel: #020304;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      --green: #a7ffb2;
      --white: #eaffee;
    }

    html, body { height: 100%; margin: 0; background: var(--bg); }
    body { display:flex; align-items:center; justify-content:center; }

    .screen {
      width: min(1200px, 94vw);
      height: min(680px, 74vh);
      background: var(--panel);
      border-radius: 16px;
      box-shadow: 0 24px 70px rgba(0,0,0,.65);
      padding: 22px;
      overflow: hidden;
      position: relative;
      font: 16px/1.5 var(--mono);
      color: var(--green);
      transform: translateZ(0);
    }

    pre { margin: 0; white-space: pre-wrap; word-break: break-word; }

    .cursor {
      display:inline-block;
      width: 10px;
      margin-left: 2px;
      animation: blink 1s steps(2,end) infinite;
    }
    @keyframes blink { 50% { opacity: 0; } }

    /* Scanlines + vignetta */
    .screen::before{
      content:"";
      position:absolute; inset:0;
      background: repeating-linear-gradient(
        to bottom,
        rgba(255,255,255,0.035) 0px,
        rgba(255,255,255,0.035) 1px,
        rgba(0,0,0,0) 3px,
        rgba(0,0,0,0) 7px
      );
      pointer-events:none;
      mix-blend-mode: overlay;
      opacity:.35;
    }
    .screen::after{
      content:"";
      position:absolute; inset:-20%;
      background: radial-gradient(circle at center, rgba(0,0,0,0) 0%, rgba(0,0,0,.62) 65%, rgba(0,0,0,.9) 100%);
      pointer-events:none;
    }

    /* --- GLITCH / TAKEOVER MODES --- */

    /* Micro glitch breve */
    .microglitch{
      animation: microFlicker .14s infinite;
      filter: contrast(1.25) saturate(1.15);
    }
    @keyframes microFlicker{
      0%   { transform: translate(0,0); opacity:1; }
      25%  { transform: translate(1px,-1px); opacity:.95; }
      50%  { transform: translate(-2px,1px); opacity:.9; }
      75%  { transform: translate(2px,0); opacity:.92; }
      100% { transform: translate(0,0); opacity:1; }
    }

    /* Distorsione "storta" più cinematografica */
    .warp{
      animation: warpJitter .12s infinite;
      filter: contrast(1.35) saturate(1.2) hue-rotate(-6deg);
    }
    @keyframes warpJitter{
      0%   { transform: perspective(900px) rotateX(0.8deg) rotateY(-0.6deg) skewX(-0.5deg) translate(0,0) scale(1.002); }
      20%  { transform: perspective(900px) rotateX(-0.6deg) rotateY(0.9deg) skewX(0.8deg) translate(2px,-1px) scale(1.004); }
      40%  { transform: perspective(900px) rotateX(1.2deg) rotateY(0.2deg) skewY(0.7deg) translate(-2px,1px) scale(1.003); }
      60%  { transform: perspective(900px) rotateX(-1deg) rotateY(-0.3deg) skewX(-0.9deg) translate(3px,0) scale(1.004); }
      80%  { transform: perspective(900px) rotateX(0.4deg) rotateY(1deg) skewY(-0.6deg) translate(-3px,-1px) scale(1.003); }
      100% { transform: perspective(900px) rotateX(0.8deg) rotateY(-0.6deg) skewX(-0.5deg) translate(0,0) scale(1.002); }
    }

    /* RGB split overlay */
    .rgb::before{
      opacity: .55;
      filter: saturate(1.3);
    }
    .rgbLayer{
      position:absolute; inset:0;
      pointer-events:none;
      mix-blend-mode: screen;
      opacity: 0;
    }
    .rgbOn .rgbLayer{ opacity:.22; }
    .rgbLayer.red   { background: rgba(255, 80, 80, .20); transform: translate(2px,0); }
    .rgbLayer.cyan  { background: rgba( 80,255,255, .18); transform: translate(-2px,0); }

    /* Noise overlay */
    .noise{
      position:absolute; inset:0;
      pointer-events:none;
      opacity: 0;
      background-image:
        radial-gradient(rgba(255,255,255,.25) 1px, transparent 1px);
      background-size: 3px 3px;
      mix-blend-mode: overlay;
      filter: blur(.2px);
    }
    .noiseOn .noise{ opacity:.08; }

    /* --- REVEAL --- */
    .reveal{
      position:absolute; inset:0;
      display:none;
      align-items:center; justify-content:center;
      background:#000;
      color: var(--white);
      text-align:center;
      padding: 32px;
    }

    /* Save the date che TREMA/GLITCHEGGIA sempre */
    .std{
      font: 700 52px/1.05 var(--mono);
      letter-spacing: .04em;
      text-transform: uppercase;
      display:inline-block;
      position: relative;
      animation: stdTremble .14s infinite;
      text-shadow:
        2px 0 rgba(255,80,80,.35),
        -2px 0 rgba(80,255,255,.28);
    }
    @keyframes stdTremble{
      0%   { transform: translate(0,0); filter: none; }
      25%  { transform: translate(2px,-1px); filter: contrast(1.2); }
      50%  { transform: translate(-2px,1px); filter: contrast(1.3) hue-rotate(-8deg); }
      75%  { transform: translate(1px,1px); filter: contrast(1.25); }
      100% { transform: translate(0,0); filter: none; }
    }

    /* Nomi/data GRANDI e STABILI */
    .names{
      margin-top: 18px;
      font: 800 76px/1.02 var(--mono);
      letter-spacing: .02em;
    }
    .date{
      margin-top: 10px;
      font: 700 64px/1.05 var(--mono);
      opacity: .95;
    }
    .sub{
      margin-top: 14px;
      font: 500 18px/1.3 var(--mono);
      opacity: .78;
      letter-spacing: .02em;
    }

    /* Hint (facoltativo) per registrazione verticale: puoi mettere height maggiore e width minore */
  </style>
</head>
<body>
  <div class="screen" id="screen">
    <div class="rgbLayer red"></div>
    <div class="rgbLayer cyan"></div>
    <div class="noise"></div>

    <pre id="out"></pre><span class="cursor">█</span>

    <div class="reveal" id="reveal">
      <div>
        <div class="std">SAVE THE DATE</div>
        <div class="names">Roberto e Chiara</div>
        <div class="date">08 Maggio 2026</div>
      </div>
    </div>
  </div>

  <script>
    const out = document.getElementById('out');
    const screen = document.getElementById('screen');
    const reveal = document.getElementById('reveal');

    const sleep = (ms) => new Promise(r => setTimeout(r, ms));

    async function typeLine(text, cps=55) {
      for (const ch of text) {
        out.textContent += ch;
        await sleep(1000 / cps);
      }
      out.textContent += "\n";
    }

    function setMode({micro=false, warp=false, rgb=false, noise=false} = {}){
      screen.classList.toggle('microglitch', micro);
      screen.classList.toggle('warp', warp);
      screen.classList.toggle('rgbOn', rgb);
      screen.classList.toggle('noiseOn', noise);
    }

    async function wipeFast(ms=420){
      // cancella in modo aggressivo per effetto takeover
      const start = Date.now();
      while (Date.now() - start < ms) {
        const t = out.textContent;
        out.textContent = t.slice(0, Math.max(0, t.length - Math.floor(12 + Math.random()*45)));
        await sleep(18 + Math.random()*22);
      }
      out.textContent = "";
    }

    async function spamLines(lines, cps=90, jitter=true){
      for (const l of lines){
        await typeLine(l, cps + (jitter ? Math.floor(Math.random()*25) : 0));
        await sleep(jitter ? (20 + Math.random()*60) : 30);
      }
    }

    async function run() {
      // --- NORMALITÀ ---
      setMode({noise:true});
      await typeLine("$ code .", 70);
      await typeLine("Opening workspace: wedding-repo", 65);
      await sleep(200);
      await typeLine("$ git status", 70);
      await typeLine("On branch main", 70);
      await typeLine("Your branch is up to date with 'origin/main'.", 60);
      await typeLine("nothing to commit, working tree clean", 60);
      await sleep(350);
      await typeLine("$ npm run build", 70);
      await typeLine("✔ Compiled successfully", 70);
      await sleep(550);

      // --- PRIMO “QUALCOSA NON VA” (micro glitch) ---
      setMode({micro:true, rgb:true, noise:true});
      await typeLine("> WARNING: unexpected input stream detected", 95);
      await sleep(120);
      await typeLine("> source: tty0 (unknown)", 95);
      await sleep(120);
      setMode({noise:true}); // torna quasi normale

      // --- TAKEOVER (warp + rgb + noise) ---
      await sleep(220);
      setMode({warp:true, rgb:true, noise:true});
      await spamLines([
        "[ kernel ] intrusion: signature match: 0xC0FFEE",
        "[ auth ] elevating privileges... (sudo) ✅",
        "[ net  ] opening reverse tunnel: 127.0.0.1 -> 10.13.37.42",
        "[ net  ] handshake: TLS1.3 / cipher: CHACHA20-POLY1305",
        "[ sys  ] mounting /dev/feelings as read-write",
        "[ mem  ] dumping secrets... ██████████ 72%",
        "[ sec  ] firewall: bypassed",
        "[ io   ] injecting payload...",
        "[ io   ] writing to display buffer...",
        "[ ok   ] display override granted ✅"
      ], 110, true);

      // --- “CANCELLO TUTTO” (wipe aggressivo) ---
      await sleep(120);
      await wipeFast(520);

      // --- MESSAGGIO HACKER ---
      setMode({warp:true, rgb:true, noise:true});
      await spamLines([
        "Hello, Roberto.",
        "We have accessed your system.",
        "",
        "Analyzing heart status... ██████████ 100%",
        "RESULT: COMPROMISED ✅",
        "ROOT CAUSE: Chiara",
        "",
        "This change is irreversible.",
        "Proceeding with scheduled deployment..."
      ], 95, true);

      await sleep(260);

      // --- GLITCH FINALE + REVEAL ---
      // colpo finale più forte
      setMode({micro:true, warp:true, rgb:true, noise:true});
      await sleep(260);

      // stacco a nero pulito
      setMode({});
      screen.style.background = "#000";
      out.textContent = "";
      await sleep(220);

      // mostra reveal (SAVE THE DATE trema by CSS)
      reveal.style.display = "flex";
    }

    run();
  </script>
</body>
</html>
